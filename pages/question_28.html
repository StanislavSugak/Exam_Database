<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/basic.css">
    <link rel="stylesheet" href="../css/font.css">
    <link rel="stylesheet" href="../css/question.css">
    <title>question_28</title>
</head>
<body>
    <header>
        <img src="../images/back.png" alt="fail" class="back">
        <a href="../pages/home.html"><p class="text-Poppins20">Number</p></a>
        <a href="../pages/homeABC.html"><p class="text-Poppins20">ABC</p></a>
    </header>
    <main>
        <p class="text-Poppins13 glav"><span>Защита баз данных</span></p>
        <p class="text-Poppins13">Одна из основных функций службы администрирования баз данных состоит в обеспечении защиты данных от разрушений при сбоях оборудования от некорректных обновлений и не санкционированного доступа.</p>
        <p class="text-Poppins13">1. Защита данных от разрешений при сбоях оборудования (физическая целостность). Физическая целостность обеспечивается средствами введения системного журнального файла и возможностью восстановления текущего состояния БД на основании копии и журнального файла.</p>
        <p class="text-Poppins13">2. Защиты от некорректных обновлений. Она предупреждает неверное использование данных. Иногда называется логической целостностью. Данных вид защиты обеспечивается за счет использования двух основных механизмов управления доступа пользователей к данным:</p>
        <p class="text-Poppins13 list">a. Ограничение доступа пользователя ко всей базе данных. Каждый пользователь имеет возможность обрабатывать лишь некоторое подмножество данных. Соответственно остальные данные защищены от возможных искажены этим пользователем</p>
        <p class="text-Poppins13 list">b. При описании данных можно задавать область допустимых значений. В этом случае система автоматически проверяет новое значение на допустимость и отклоняет ввод некорректных значений.</p>
        <p class="text-Poppins13">3. Защиты данных от несанкционированного доступа. Данных компонент предполагает использование средств, препятствующих извлечение и обновление данных от некоторых пользователей.</p>
        <p class="text-Poppins13">4. Обеспечение коллективного доступа к данным. По сколько данные используются многими пользователями возникает проблема синхронизации параллельного доступа к одним и тем же данным многих пользователей.</p>
        <p class="text-Poppins13 glav"><span>Журнальная информация; служебная информация</span></p>
        <p class="text-Poppins13">Каждая БД в SQL Server имеет собственный журнал транзакций, который может состоять из одного или нескольких файлов. Для улучшения производительности и управляемости журнал транзакции физически разбивается на более-менее виртуальные журналы транзакций. Виртуальные журналы транзакций является основными блоками, которыми оперируется SQL Server при работе с журналом транзакций. Сервер выделяет место для хранения транзакции виртуальными журналами. Как только все транзакции хранящихся в виртуальном журнале завершаются и становятся не активными сервер освобождает этот виртуальный журнал. Свободный виртуальный журнал может быть повторно использован для записи транзакции. Сервер старается поддерживать размер виртуальных журналов по возможности минимальным.</p>
        <p class="text-Poppins13">Информация о транзакциях записывается последовательно во все виртуальные журналы начиная с первого. Только после того, как первый виртуальный журнал будет заполнен, сервер начинает заполнение второго виртуального журнала. Если свободных виртуальных журналов нет происходит автоматического увеличения размера файла журнала транзакции. Если возможность автоматического увеличения размера журнала транзакции не реализовано, то сервер выдаст сообщение об ошибке. В этом случае можно вручную увеличить размер файла журнала транзакций или выполнить урезание журнала транзакции. </p>
        <p class="text-Poppins13">Журнал транзакции имеет простую структуру представляющий собой последовательность записей. Каждая запись содержит информацию о транзакции. Каждая запись в журнале маркируется порядковым номером LSN (log sequence number) и id транзакции, к которой она принадлежит. Записи, принадлежащие к одной транзакции, связываются в цепочку для ускорения повторного прогона использования транзакции. Каждая запись транзакции имеет ссылку на LSN следующей записи этой же транзакции. LSN последовательно увеличивается каждый раз, когда в журнале транзакции создается новая запись. Порядковый номер записи не зависит от того, в каком месте файла журнала транзакции эта запись физически сохраняется.</p>
        <p class="text-Poppins13">Неактивные записи не завершенных транзакций постепенно заменяются данным активных транзакций.</p>
        <p class="text-Poppins13">Процесс освобождения не активных виртуальных журналов называется <span>урезанием журнала транзакций</span>. Если не выполнять урезание журнала транзакций, то со временем свободное место закончится. После того, как все свободное место на диске закончится работы с БД станет невозможна так как не одна транзакция не может быть выполнена.</p>
        <p class="text-Poppins13">Для уменьшения количества транзакций, которое необходимо будет зафиксировать при восстановлении БД SQL Server выполняется процесс называемой <span>контрольной точкой.</span></p>
        <p class="text-Poppins13">При выполнении контрольной точки сервер сбрасывает из буферного кэша на диск все страницы с не завершенными транзакциями, тем самым фиксируя транзакции. <span>Процесс контрольной точки выполняется в следующей последовательности:</span></p>
        <p class="text-Poppins13 list">1&#41; Сервер записывает на диск все страницы с неподтвержденными транзакциями, т.е. страницы, которые были изменены со временем выполнения последней контрольной точки;</p>
        <p class="text-Poppins13 list">2&#41; В журнале транзакций записывается факт их фиксации;</p>
        <p class="text-Poppins13 list">3&#41; Записывается на диск все страницы с неподтвержденными транзакциями для журнала транзакций, обеспечивая таким образом целостность самого журнала транзакций;</p>
        <p class="text-Poppins13 list">4&#41; В журнале транзакций сохраняется информация обо всех страницах с неподтвержденных транзакциях, не записанных на диск;</p>
        <p class="text-Poppins13 list">5&#41; Сохраняется последовательность записи LSN, с которой будет начат процесс восстановления базы данных. Этот номер называется минимальный и обозначается как MinLSN. LSEN – это номер первой записи, принадлежащей самой старой транзакции;</p>
        <p class="text-Poppins13 list">6&#41; Сохраняется информация о выполнении процессах контрольной точки. Журнал транзакций хранит информацию обо всех контрольных точках, выполняемых в базе данных. В записи они связываются в цепочку.</p>
        <p class="text-Poppins13 list">7&#41; Если в базе данных установлена опция trunk log on checkpoint, происходит удаление всей информации о не зафиксированных транзакциях, урезание журнала и освобождение виртуальной журналы транзакций.</p>
    </main>
    <footer>

    </footer>
</body>
<script src="../js/back.js"></script>
</html>